<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile - Collection Status</title>  
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=BBH+Bogle&family=Funnel+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="https://github.com/cloudclique/myshelf/raw/refs/heads/main/myshelf_logo_favicon_color.ico">
</head>
<body>
    <header class="main-header">
        <div class="menu-btns"="display: flex; align-items: center; flex-wrap:wrap;">
            <a class="header-logo"><img src="https://github.com/cloudclique/myshelf/blob/main/myshelf_logo_logo_color_2-11.png?raw=true" alt="MyShelf"></a>
            <nav class="header-nav" style="display: flex; align-items: center; flex-wrap:nowrap;">            
                <a href="../"><i class="bi bi-images"></i> Gallery</a>
                <a href="../profiles/"><i class="bi bi-people-fill"></i> Community</a>
                <a href="../search/"><i class="bi bi-calendar3"></i> Database</a>
                <a href="../chat/" class="active"><i class="bi bi-envelope-fill"></i></a>           
            </nav>
        </div>
        <div class="header-tools" id="headerTools"></div>
    </header>

            <div id="confirmationModal" class="modal" style="display:none;">
            <div class="modal-content">
                <p id="confirmationText"></p>
                <div class="modal-actions">
                <button id="confirmYesBtn" class="action-btn">Yes</button>
                <button id="confirmNoBtn" class="action-btn">No</button>
                </div>
            </div>
            </div>

        <div class="user-controlls">
            <div class="profile-banner-container">
                <img id="profileBanner" src="https://placehold.co/1000x200/555/eee?text=User+Profile+Banner" alt="User Profile Banner">
            </div>

            <div class="status-alignment">
                <h1 id="profileTitle">User Profile</h1> 
                <div class="profile-cntrl-btns">
                    <section class="profile-header">        
                        <div id="statusFilters" class="status-tabs"></div>
                    </section>
                    <button id="openChatBtn" class="action-btn">Message User</button>
                </div>
            </div>
        </div>

    <div class="detail-page-wrapper">

        <div id="profileLoader" class="profile-loader">
            <div class="spinner"></div>
            <p>Loading profile...</p>
        </div>



        <main class="main-column">



            <section class="item-section" >
                <div class="form-group-row" style="margin-bottom: 0px; align-items: center;">   
                    <input type="text" id="profileSearchInput" class="modern_text_field" placeholder="Search by name or ID" />
                    <button id="profileSearchBtn" class="action-btn"><i class="bi bi-search"></i></button>
                    <button id="profileClearSearchBtn" class="secondary-btn" style="display:none;"><i class="bi bi-x-square-fill"></i></button>
                </div>

                <div id="profileItemsGrid" class="item-grid">
                    <p id="loadingStatus">Loading user collection...</p>
                </div>
                <div id="paginationContainer" class="pagination-container">
                </div>
            </section>

            <div id="userGalleryPreview" class="user-gallery-preview">
                <h2>User Gallery</h2>
                <div id="previewGrid" class="preview-grid"></div>
                <button id="viewMoreGalleryBtn" class="action-btn">View More</button>
            </div>

            <div id="commentsSection" class="item-section">

            <h2>Comments</h2>

            <!-- Only shown if user is logged in -->
            <div id="addCommentBox" class="comment-form-container" style="display:none;">
                <textarea id="commentInput" placeholder="Write a comment..." maxlength="800" class="modern_text_field"></textarea>
                <button id="postCommentBtn" class="action-btn" style="margin-bottom: 10px;"><i class="bi bi-send-fill"></i></button>
            </div>

            <!-- Login reminder if not logged in -->
            <p id="loginToComment" style="display:none;">You must log in to post comments.</p>

            <!-- Comment list -->
            <div id="commentsList" class="comments-list"></div>
            <div id="commentPagination"></div>  
            </div>

        </main>
        </div>
    </div>

<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
<script type="module" src="../firebase-config.js"></script>
<script type="module" src="user-profile.js"></script>
</body>
</html>